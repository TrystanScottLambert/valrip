# generated by datamodel-codegen:
#   filename:  waves_maml_schema_v1p0.json
#   timestamp: 2025-12-04T04:42:54+00:00
#   1. Run: datamodel-codegen --input rip_validator/schemas/waves_maml_schema_v1p0.json --input-file-type jsonschema --output rip_validator/model_waves_maml.py.
#   2. Rename the classes to end with "Entry", otherwise there are conflicts with the "Field" class due to that being a reserved word. 
#   3. Replace 'const' with 'Literal'.
#   4. Replace 'regex' with 'pattern'.
#   5. Replace Survey and License string types with the relevant enums from .data_types
#   6. Remove the pydantic.Extra import, import pydantic.ConfigDict, and replace the 
#      "class Config: extra = Extra.forbid" with "model_config = ConfigDict(extra="forbid")""

from __future__ import annotations

from datetime import date as date_aliased
from typing import List, Optional, Union

from pydantic import BaseModel, ConfigDict, Field, constr

from .data_types import SurveyName, License


class DOIEntry(BaseModel):
    DOI: str = Field(..., description='Valid DOI')
    type: str = Field(..., description='Type of DOI')


class DependEntry(BaseModel):
    survey: str = Field(..., description='The name of the dependent survey.')
    dataset: str = Field(..., description='The name of the dependent dataset.')
    table: str = Field(..., description='The name of the dependent table.')
    version: Union[str, float] = Field(
        ..., description='The version of the dependent table.'
    )


class QCEntry(BaseModel):
    min: float = Field(..., description='Required data minimum value')
    max: float = Field(..., description='Required data maximum value')


class FieldEntry(BaseModel):
    name: str = Field(..., description='Required field name')
    unit: str = Field(..., description='Required unit of measurement')
    info: str = Field(..., description='Required short description')
    ucd: str = Field(..., description='Required string of semicolon-separated UCDs')
    data_type: str = Field(
        ..., description='Required data type (e.g., int32, string, bool, float64)'
    )
    qc: Optional[QCEntry] = Field(None, description='Optional quality control parameters')


class WavesMamlSchema(BaseModel):
    model_config = ConfigDict(extra="forbid")

    survey: SurveyName = Field(..., description='Required survey name')
    dataset: str = Field(..., description='Required dataset name')
    table: str = Field(..., description='Required table name')
    version: Union[str, float] = Field(
        ..., description='Required version (string, integer, or float)'
    )
    date: date_aliased = Field(
        ...,
        description='Required date in YYYY-MM-DD format (ISO-8601), must be enclosed in quotes',
    )
    author: constr(pattern=r'^* * <[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}>$') = (
        Field(..., description='Required lead author name and <email>')
    )
    coauthors: Optional[
        List[constr(pattern=r'^* * <[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}>$')]
    ] = Field(None, description='Optional list of coauthor names and <emails>')
    DOIs: Optional[List[DOIEntry]] = Field(
        None, description='Optional list of DOIs relevant to this table'
    )
    depends: Optional[List[DependEntry]] = Field(
        None, description='Optional list of tables this table depends on'
    )
    description: str = Field(..., description='Required short description of the data')
    comments: Optional[List[str]] = Field(
        None, description='Optional list of comments or interesting facts'
    )
    license: Optional[License] = Field(None, description='Optional license for the data')
    keywords: Optional[List[str]] = Field(None, description='Optional list of keywords')
    MAML_version: float = Field(
        1.1, Literal=True, description='Required version of the MAML schema'
    )
    fields: List[FieldEntry] = Field(
        ..., description='Required list of all the columns or fields of this table'
    )
